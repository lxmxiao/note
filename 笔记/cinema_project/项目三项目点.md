# 微服务启动

调用其他微服务的组件时，在 `@Reference `注解中加入属性 `check = false` 可以使自己模块启动时不依赖其他组件独自启动

```java
@Reference(interfaceClass = UserService.class, check = false)
UserService userService;
```

# javabean

跨模块时所使用的所有 javabean 必须实现序列化（通过IO进行传输）

# 启动

前端向 nginx 请求，nginx 转发给后端

需要配置 nginx 服务器（跨域）

# zookeeper 依赖包和 log4j 依赖包冲突

找出冲突的包，删掉

# syn为单机锁，集群时无法使用

# 提高接口响应速度

缓存、异步、无锁

# redis 单线程模型

默认不会出现库存并发更新问题

不会出现线程转换（锁等待）

对于缓存来说速度会更快

# redis 部署模式

# 不同模块的数据库交互不能被传统事务管理

原因是不同模块与数据库交互时不是在同一个数据库连接中

# 幂等性

每次执行后的结果都是一致的

例如数据库修改：当反复执行同一个修改语句时

保证幂等性：应保证第一次修改后和第n次修改后的结果一致

# 秒杀令牌

产生数量上的策略有两种：

1. 固定令牌  固定令牌数量有1000个
2. 固定时间窗口内的令牌  固定一秒钟之内发放100个

#### 秒杀大闸

设定一个秒杀令牌库存

#### 秒杀泄洪

本质：排队策略

# 限流算法

#### 令牌桶算法

有个令牌桶

生成令牌的速度是恒定的

请求多的情况下有些请求拿不到令牌就会被拒绝掉

#### 漏桶算法

请求放入桶中，桶以固定的速度流出

当桶满后，会由溢出情况，溢出的请求会被拒绝掉

#### 两种优缺点：

* 令牌桶允许突发情况，一开始如果请求比较多的话，令牌桶可以允许请求增多
* 漏桶不允许突发情况，速度恒定

# 热点数据

## 本地缓存

cache